generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model User {
  id          Int      @id @default(autoincrement())
  vorname     String
  nachname    String
  role        UserRole
  skills      Skill[]  @relation("UserSkills")
  teams       Team[]   @relation("TeamMembers")
  token       String?
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
  password    String
  arbeitszeit Int

  @@unique([vorname, nachname])
}

model Skill {
  id        Int      @id @default(autoincrement())
  name      String   @unique
  users     User[]   @relation("UserSkills")
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model Team {
  id        Int      @id @default(autoincrement())
  name      String
  members   User[]   @relation("TeamMembers")
  roadmapId Int?
  roadmap   Roadmap? @relation("TeamRoadmap", fields: [roadmapId], references: [id])
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  projectId Int?
}

model Roadmap {
  id        Int       @id @default(autoincrement())
  title     String // Added title for clarity
  projects  Project[] @relation("RoadmapProjects") // Relation with Projects
  teams     Team[]    @relation("TeamRoadmap") // Relation with Teams
  createdAt DateTime  @default(now())
  updatedAt DateTime  @updatedAt
}

model Project {
  id             Int       @id @default(autoincrement())
  name           String
  description    String
  startDate      DateTime?
  endDate        DateTime?
  roadmapId      Int?
  roadmap        Roadmap?  @relation("RoadmapProjects", fields: [roadmapId], references: [id])
  estimationDays Int
  createdAt      DateTime  @default(now())
  updatedAt      DateTime  @updatedAt
}

enum UserRole {
  PO
  SM
  Developer
  Admin
}
