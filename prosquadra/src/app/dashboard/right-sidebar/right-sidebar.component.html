<ng-progress/>
<div class="sidebar-right">
  <button (click)="showNotifications()" id="notification" mat-icon-button>
    <mat-icon matBadge="{{ notificationsAmount }}">notifications</mat-icon>
  </button>

  <div class="user-info">
    <p>Benutzer</p>
    <div class="user-avatar">
      <div class="name">{{ userInitials }}</div>
    </div>
  </div>


  <mat-accordion class="ProjectListContainer" *ngIf="(userProject || userProjects) && !noTeamAndProject">
    <div *ngIf="user?.role !== UserRole.SM">
      <mat-expansion-panel class="currentProject">
        <mat-expansion-panel-header>
          <mat-panel-title>{{ userProject?.name }}</mat-panel-title>
        </mat-expansion-panel-header>
        <p>{{ userProject?.description }}</p>
        <p class="bold">Start Date:</p>
        <p>{{ userProject?.startDate | date }}</p>
        <p class="bold">End Date:</p>
        <p>{{ userProject?.endDate | date }}</p>
        <button [routerLink]="['home']" class="button" mat-raised-button>Zur Projektübersicht</button>
      </mat-expansion-panel>
    </div>

    <div *ngIf="user?.role === UserRole.SM">
      <mat-expansion-panel class="currentProject" *ngFor="let project of userProjects">
        <mat-expansion-panel-header>
          <mat-panel-title>{{ project.name }}</mat-panel-title>
        </mat-expansion-panel-header>
        <p>{{ project.description }}</p>
        <p class="bold">Start Date:</p>
        <p>{{ project.startDate | date }}</p>
        <p class="bold">End Date:</p>
        <p>{{ project.endDate | date }}</p>
        <button [routerLink]="['/home']" class="button" mat-raised-button>Zur Projektübersicht</button>
      </mat-expansion-panel>
    </div>

  </mat-accordion>

  <div class="buttonsSidebar">
  <button mat-raised-button (click)="showQrCode()">Toggle QR-Code</button>
    <button mat-raised-button (click)="getPDF()">Download Benutzerdaten</button>
  </div>

  <ng-container *ngIf="QrCodeVisible">
  <qr-code [value]=getPdfUrl()
           errorCorrectionLevel="M" />
  </ng-container>
  <app-user-skills [user]="user" *ngIf="user?.role !== UserRole.Admin && user?.role !== UserRole.Bereichsleiter"></app-user-skills>

  <button (click)="triggerLogout()" mat-raised-button class="buttonsSidebar">Logout</button>

  <div class="footer">
    <br>
    <p> Deine Rolle: {{ user?.role }} </p>
  </div>
</div>
